# run default:
mkdir tmp_default && mrclusterstats mrclusterstats/subjects.txt mrclusterstats/design.txt SIFT_phantom/mask.mif tmp_default/ -ttests mrclusterstats/contrast.txt
# check outputs:
( for i in abs_effect beta0 beta1 std_dev std_effect tfce tvalue Zstat; do testing_diff_image tmp_default/$i.mif mrclusterstats/default/$i.mif -abs 1e-6 || exit 1; done ) && mrcalc tmp_default/fwe_1mpvalue.mif 0.95 -gt - | testing_diff_image - SIFT_phantom/upper.mif

# run w. reduced mask:
mkdir tmp_masked && mrclusterstats mrclusterstats/subjects.txt mrclusterstats/design.txt SIFT_phantom/upper.mif tmp_masked/ -ttests mrclusterstats/contrast.txt
# check outputs:
( for i in abs_effect beta0 beta1 std_dev std_effect tfce tvalue Zstat; do testing_diff_image tmp_masked/$i.mif mrclusterstats/masked/$i.mif -abs 1e-6 || exit 1; done ) && mrcalc tmp_masked/fwe_1mpvalue.mif 0.95 -gt - | testing_diff_image - SIFT_phantom/upper.mif

# run w. cluster-forming threshold:
mkdir tmp_threshold && mrclusterstats mrclusterstats/subjects.txt mrclusterstats/design.txt SIFT_phantom/mask.mif tmp_threshold/ -ttests mrclusterstats/contrast.txt -threshold 3.5
# check outputs:
( for i in abs_effect beta0 beta1 clustersize std_dev std_effect tvalue Zstat; do testing_diff_image tmp_threshold/$i.mif mrclusterstats/threshold/$i.mif -abs 1e-6 || exit 1; done ) && mrcalc tmp_threshold/fwe_1mpvalue.mif 0.95 -gt - | testing_diff_image - SIFT_phantom/upper.mif

# run posthoc analysis:
mkdir tmp_posthoc && mrclusterstats mrclusterstats/subjects.txt mrclusterstats/design.txt SIFT_phantom/mask.mif tmp_posthoc/ -ttests mrclusterstats/contrast.txt -posthoc mrclusterstats/posthoc.mif
# check outputs:
( for i in abs_effect beta0 beta1 std_dev std_effect tfce tvalue Zstat; do testing_diff_image tmp_posthoc/$i.mif mrclusterstats/posthoc/$i.mif -abs 1e-6 || exit 1; done ) && mrcalc tmp_posthoc/fwe_1mpvalue.mif 0.95 -gt - | testing_diff_image - mrclusterstats/posthoc.mif
